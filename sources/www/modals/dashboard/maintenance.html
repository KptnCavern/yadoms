<div id="dashboard-maintenance">
   <h1 class="page-header" data-i18n="modals.dashboard.sub-windows.maintenance.title"></h1>
   <!--<h2 class="sub-header"  data-i18n="modals.dashboard.sub-windows.maintenance.information"></h2>-->
   <div class="table-responsive maintenance-table">
      <table class="table table-striped table-hover table-bordered toCompleteTable">
      </table>
   </div>
   <button type="button" class="btn btn-default btn-info backupButton" data-i18n="modals.dashboard.sub-windows.maintenance.backup" aria-expanded="false" />

</div>

<script>
   
   Yadoms.initializeMaintenanceDashboard = function () {
      var d = new $.Deferred();
      
      MaintenanceManager.getDatabaseDetails()
      .done(function(data) {
      
         var $table = $("table.toCompleteTable");
      
         $(".backupButton").prop("disabled", true);
         
         $table.find("tr").remove();
      
         $.each(data, function(index, value) {
            if(index !== "backupSupport") {
               $table.append("<tr><td class=\"header\" data-i18n=\"modals.dashboard.sub-windows.maintenance." + index + "\"></td><td>" + value + "</td></tr>");
            } else {
               if(value === "true") {
                  $(".backupButton").prop("disabled", false);
               }
            }
         }); 
         
         $table.i18n();

         d.resolve();
      })
      .fail(function(error) {
         $("#dashboard-maintenance > h1").append("<div>Error : " + error + "</div>");
         d.reject(error);
      });
      
      return d.promise();
   };

</script>